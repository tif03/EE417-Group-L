<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Dash Board</title>
    <link rel="stylesheet" href="./css/profile.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="./img/fontawesome/css/fontawesome.css" rel="stylesheet" />
    <link href="./img/fontawesome/css/brands.css" rel="stylesheet" />
    <link href="./img/fontawesome/css/solid.css" rel="stylesheet" />
</head>

<body>
    <div class="sidebar" >
        <div class="logo"></div>
        <ul class="menu">
            <li>
                <a href="dashboard.html">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="weather.html">
                    <i class="fas fa-cloud-sun"></i>
                    <span>Weather</span>
                </a>
            </li>
            <li>
                <a href="map.html">
                    <i class="fas fa-map-marked"></i>
                    <span>Map</span>
                </a>
            </li>
            <li>
                <a href="calendar.html">
                    <i class="fas fa-calendar"></i>
                    <span>Calendar</span>
                </a>
            </li>
            <li>
                <a href="room.html">
                    <i class="fas fa-door-closed"></i>
                    <span>Room Availibility</span>
                </a>
            </li>
            <li class="active">
                <a href="profile.html">
                    <i class="fas fa-gear"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li id="admin">
                <a href="admin.html">
                    <i class="fa-solid fa-user-tie"></i>
                    <span>Admin</span>
                </a>
            </li>
            <li class="logout">
                <a href="login_signup.html">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Log Out</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="main--content">
        <div class="header--wrapper">
            <div class="header--title">
                <h2>Welcome</h2>
                <span>User</span>
            </div>

            <div class="profile-pic">
                <i class="fas fa-user"></i>
            </div>
        </div>

        <div class="card--containter">
            <div class="container-xl px-4 mt-4">
                <!-- <hr class="mt-0 mb-4"> -->
                <div class="row">
                    <div class="col-xl-8">
                        <!-- Account details card-->
                            <h2>Account Details</h2>
                            <div class="card-body">
                                <form id="userInfoForm">
                                    <!-- Form Group (username)-->
                                    <div class="mb-3">
                                        <label class="small mb-1" for="inputUsername">Username (how your name will appear on the site)</label>
                                        <input class="form-control" id="inputUsername" type="text" placeholder="Enter your username" value="">
                                     </div>
                                    <!-- Form Row-->
                                    <div class="row gx-3 mb-3">
                                        <!-- Form Group (first name)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputFirstName">First Name</label>
                                            <input class="form-control" id="inputFirstName" type="text" placeholder="Enter your first name" value="">
                                        </div>
                                        <!-- Form Group (last name)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputLastName">Last Name</label>
                                            <input class="form-control" id="inputLastName" type="text" placeholder="Enter your last name" value="">
                                        </div>
                                    </div>
                                    <!-- Form Row        -->
                                    <div class="row gx-3 mb-3">
                                        <!-- Form Group (organization name)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputOrgName">Course Name</label>
                                            <input class="form-control" id="inputOrgName" type="text" placeholder="Enter your course name" value="">
                                        </div>
                                        <!-- Form Group (location)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputLocation">Enrollment number</label>
                                            <input class="form-control" id="inputLocation" type="text" placeholder="Enter your Enrollment Number" value="">
                                        </div>
                                    </div>
                                    <!-- Form Group (email address)-->
                                    <div class="mb-3">
                                        <label class="small mb-1" for="inputEmailAddress">Email address</label>
                                        <input class="form-control" id="inputEmailAddress" type="email" placeholder="Enter your email address" value="">
                                    </div>
                                    <!-- Form Row-->
                                    <div class="row gx-3 mb-3">
                                        <!-- Form Group (phone number)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputPhone">Phone number</label>
                                            <input class="form-control" id="inputPhone" type="tel" placeholder="Enter your phone number" value="">
                                        </div>
                                        <!-- Form Group (birthday)-->
                                        <div class="col-md-6">
                                            <label class="small mb-1" for="inputBirthday">Birthday</label>
                                            <input class="form-control" id="inputBirthday" type="date" name="birthday" placeholder="Enter your birthday" value="">
                                        </div>
                                    </div>
                                    <!-- Save changes button-->
                                    <button class="btn btn-primary" type="submit">Save changes</button>
                                </form>
                            </div>
                    </div>
                </div>
            </div>

            
        </div>

        <br>

        <div class="card--containter">
            <div class="container-xl px-4 mt-4">
                <!-- <hr class="mt-0 mb-4"> -->
                <div class="row">
                    <div class="col-xl-8">
                        <!-- Account details card-->
                            <h2>Change Password</h2>
                            <div class="card-body">
                                <form id="changePasswordForm">
                                    <div class="mb-3">
                                        <label class="small mb-1" for="currentPassword">Enter Your Current Password</label>
                                        <input class="form-control" id="currentPassword" type="password" placeholder="Enter your current password">
                                    </div>
                                    <div class="mb-3">
                                        <label class="small mb-1" for="newPassword">Enter Your New Password</label>
                                        <input class="form-control" id="newPassword" type="password" placeholder="Enter your new password">
                                    </div>
                                    <div class="mb-3">
                                        <label class="small mb-1" for="confirmPassword">Confirm Your New Password</label>
                                        <input class="form-control" id="confirmPassword" type="password" placeholder="Confirm your new password">
                                    </div>
                                    <button class="btn btn-primary" type="submit">Change Password</button>
                                </form>
                                
                            </div>
                    </div>
                </div>
            </div>

            
        </div>

        <br>

        <div class="contact--container">
            <div class="header--wrapper">
                <h3 class="main--title">Contact Us</h3>
            </div>
        
            <div class="contact--wrapper">
                <a href="#" class="contact-icon" title="Email">
                    <i class="fas fa-envelope"></i>
                    <span class="contact-info">example@example.com</span>
                </a>
                <a href="#" class="contact-icon" title="Phone">
                    <i class="fas fa-phone"></i>
                    <span class="contact-info">123-456-7890</span>
                </a>
            </div>
        </div>
        
        

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const userInfoForm = document.getElementById('userInfoForm');
            userInfoForm.addEventListener('submit', function(event) {
                event.preventDefault();
        
                const formData = new FormData(userInfoForm);
                const jsonData = {};
                formData.forEach((value, key) => {
                    jsonData[key] = value;
                });
        
                fetch('http://localhost:8080/api/users/submitUserInfo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Basic ' + btoa('GroupL:GroupL') 
                    },
                    body: JSON.stringify(jsonData)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('User info updated successfully!');
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('Error updating user info.');
                });
            });
        
            const passwordForm = document.getElementById('changePasswordForm');
            passwordForm.addEventListener('submit', function(event) {
                event.preventDefault();
        
                const formData = {
                    currentPassword: document.getElementById('currentPassword').value,
                    newPassword: document.getElementById('newPassword').value,
                    confirmPassword: document.getElementById('confirmPassword').value
                };
        
                fetch('http://localhost:8080/changePassword', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Basic ' + btoa('GroupL:GroupL') 
                    },
                    body: JSON.stringify(formData)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('Password changed successfully!');
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('Error changing password.');
                });
            });
        });
        </script>
</body>
</html>